import{d as l,i as M,c as P,o as R,w as B,a as t,y as w,B as _,t as c,C as E}from"./app-BOjp7WPP.js";import{_ as F}from"./AppLayout-acO-gN44.js";import{C as r,r as G}from"./chart-DUfl3Dpl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"py-6"},V={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},$={class:"mb-6 bg-white shadow-lg rounded-lg p-6 flex flex-col sm:flex-row sm:items-end gap-4"},I={class:"flex-1"},U={class:"flex-1"},Z={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},T={class:"bg-white overflow-hidden shadow-lg rounded-lg"},W={class:"p-6"},z={class:"flex items-center"},N={class:"ml-4"},q={class:"text-3xl font-bold text-gray-900"},J={class:"bg-white overflow-hidden shadow-lg rounded-lg"},K={class:"p-6"},L={class:"flex items-center"},Q={class:"ml-4"},X={class:"text-3xl font-bold text-gray-900"},Y={class:"bg-white overflow-hidden shadow-lg rounded-lg"},tt={class:"p-6"},st={class:"flex items-center"},et={class:"ml-4"},at={class:"text-3xl font-bold text-gray-900"},ot={class:"bg-white overflow-hidden shadow-lg rounded-lg"},lt={class:"p-6"},it={class:"flex items-center"},rt={class:"ml-4"},nt={class:"text-3xl font-bold text-gray-900"},dt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ct={class:"bg-white shadow-lg rounded-lg p-6"},ut={class:"bg-white shadow-lg rounded-lg p-6"},pt={class:"bg-white shadow-lg rounded-lg p-6"},gt={class:"bg-white shadow-lg rounded-lg p-6"},vt={class:"bg-white shadow-lg rounded-lg p-6"},ht={class:"bg-white shadow-lg rounded-lg p-6"},wt={__name:"Index",props:{estadisticas:Object,filtros:Object},setup(y){var m,x;r.register(...G);const u=y,p=l(null),g=l(null),v=l(null),h=l(null),f=l(null),b=l(null),e=l(u.estadisticas),n=l(((m=u.filtros)==null?void 0:m.fecha_inicio)||null),d=l(((x=u.filtros)==null?void 0:x.fecha_fin)||null),k=()=>{if(!n.value||!d.value){alert("Debes seleccionar ambas fechas.");return}E.get(route("control.index"),{fecha_inicio:n.value,fecha_fin:d.value},{preserveScroll:!0,preserveState:!1})},C=()=>{const o=p.value.getContext("2d"),s=Object.keys(e.value.entradasPorHora).map(i=>`${i.padStart(2,"0")}:00`),a=Object.values(e.value.entradasPorHora);new r(o,{type:"line",data:{labels:s,datasets:[{label:"Entradas",data:a,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Entradas"}},scales:{y:{beginAtZero:!0}}}})},j=()=>{const o=g.value.getContext("2d"),s=Object.keys(e.value.salidasPorHora).map(i=>`${i.padStart(2,"0")}:00`),a=Object.values(e.value.salidasPorHora);new r(o,{type:"line",data:{labels:s,datasets:[{label:"Salidas",data:a,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Salidas"}},scales:{y:{beginAtZero:!0}}}})},H=()=>{const o=v.value.getContext("2d"),s=Object.keys(e.value.salidasPorHora).map(i=>`${i.padStart(2,"0")}:00`),a=Object.values(e.value.salidasPorHora);new r(o,{type:"bar",data:{labels:s,datasets:[{label:"Salidas",data:a,backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgb(239, 68, 68)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Salidas"}},scales:{y:{beginAtZero:!0}}}})},A=()=>{const o=h.value.getContext("2d"),s=Object.keys(e.value.entradasPorHora).map(i=>`${i.padStart(2,"0")}:00`),a=Object.values(e.value.entradasPorHora);new r(o,{type:"bar",data:{labels:s,datasets:[{label:"Entradas",data:a,backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgb(239, 68, 68)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Entradas"}},scales:{y:{beginAtZero:!0}}}})},S=()=>{const o=f.value.getContext("2d"),s=e.value.estudiantesActuales,a=e.value.capacidadMaxima-s;new r(o,{type:"doughnut",data:{labels:["Ocupado","Disponible"],datasets:[{data:[s,a],backgroundColor:[s>.8*e.value.capacidadMaxima?"rgb(239, 68, 68)":s>.5*e.value.capacidadMaxima?"rgb(245, 158, 11)":"rgb(34, 197, 94)","rgb(229, 231, 235)"],borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Asistencia Hoy (${s} Estudiantes)`},legend:{position:"bottom"}}}})},O=()=>{const o=b.value.getContext("2d");new r(o,{type:"pie",data:{labels:Object.keys(e.value.usuariosPorRol),datasets:[{data:Object.values(e.value.usuariosPorRol),backgroundColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(147, 51, 234)","rgb(234, 179, 8)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Usuarios por Rol"},legend:{position:"bottom"}}}})};return M(()=>{setTimeout(()=>{C(),j(),H(),A(),S(),O()},100)}),(o,s)=>(R(),P(F,{title:"Dashboard"},{default:B(()=>[t("div",D,[t("div",V,[s[12]||(s[12]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900"}," Sistema de Control de Acceso - Biblioteca FICCT "),t("p",{class:"mt-2 text-gray-600"}," Universidad Autónoma Gabriel René Moreno ")],-1)),t("div",$,[t("div",I,[s[2]||(s[2]=t("label",{for:"fechaInicio",class:"block text-sm font-medium text-gray-700"},"Fecha inicio",-1)),w(t("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>n.value=a),type:"date",id:"fechaInicio",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[_,n.value]])]),t("div",U,[s[3]||(s[3]=t("label",{for:"fechaFin",class:"block text-sm font-medium text-gray-700"},"Fecha fin",-1)),w(t("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>d.value=a),type:"date",id:"fechaFin",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[_,d.value]])]),t("div",null,[t("button",{onClick:k,class:"mt-1 px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700"}," Filtrar ")])]),t("div",Z,[t("div",T,[t("div",W,[t("div",z,[s[5]||(s[5]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])])],-1)),t("div",N,[s[4]||(s[4]=t("p",{class:"text-sm font-medium text-gray-500"},"Estudiantes Actuales",-1)),t("p",q,c(e.value.estudiantesActuales),1)])])])]),t("div",J,[t("div",K,[t("div",L,[s[7]||(s[7]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})])])],-1)),t("div",Q,[s[6]||(s[6]=t("p",{class:"text-sm font-medium text-gray-500"},"Entradas Hoy",-1)),t("p",X,c(e.value.entradasHoy),1)])])])]),t("div",Y,[t("div",tt,[t("div",st,[s[9]||(s[9]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})])])],-1)),t("div",et,[s[8]||(s[8]=t("p",{class:"text-sm font-medium text-gray-500"},"Salidas Hoy",-1)),t("p",at,c(e.value.salidasHoy),1)])])])]),t("div",ot,[t("div",lt,[t("div",it,[s[11]||(s[11]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])])],-1)),t("div",rt,[s[10]||(s[10]=t("p",{class:"text-sm font-medium text-gray-500"},"Capacidad",-1)),t("p",nt,c(e.value.capacidadMaxima),1)])])])])]),t("div",dt,[t("div",ct,[t("canvas",{ref_key:"entradasChart",ref:p,class:"w-full h-64"},null,512)]),t("div",ut,[t("canvas",{ref_key:"entradasChart2",ref:g,class:"w-full h-64"},null,512)]),t("div",pt,[t("canvas",{ref_key:"salidasChart2",ref:h,class:"w-full h-64"},null,512)]),t("div",gt,[t("canvas",{ref_key:"salidasChart",ref:v,class:"w-full h-64"},null,512)]),t("div",vt,[t("canvas",{ref_key:"ocupacionChart",ref:f,class:"w-full h-64"},null,512)]),t("div",ht,[t("canvas",{ref_key:"estudiantesChart",ref:b,class:"w-full h-64"},null,512)])])])])]),_:1}))}};export{wt as default};
