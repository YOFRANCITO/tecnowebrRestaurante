import{E as A,v as b,d as m,i as G,G as I,e as i,o as r,a as e,f as g,b as O,w as $,g as z,u as E,S as V,t as d,y as h,B as v,F as j,h as B,s as R,c as q,n as J,H as K,C as Q}from"./app-BOjp7WPP.js";import{_ as W}from"./AppLayout-acO-gN44.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"flex items-center justify-between mb-6"},Y={key:0,class:"mb-4 p-4 rounded bg-green-100 text-green-800 border border-green-300 shadow"},Z={class:"overflow-x-auto bg-white shadow rounded-lg"},ee={class:"mb-4"},te={class:"flex flex-col sm:flex-row items-center justify-between mb-4 gap-4"},se={class:"flex gap-2 items-center"},ae={class:"min-w-full divide-y divide-gray-200"},oe={class:"divide-y divide-gray-200"},le={class:"px-6 py-4 text-gray-800"},re={class:"px-6 py-4 text-gray-800"},ne={class:"px-6 py-4 text-gray-800"},ie={class:"px-6 py-4 text-gray-800"},de={class:"px-6 py-4 text-gray-800"},ce={class:"px-6 py-4 text-gray-800"},ue={class:"px-6 py-4 text-right space-x-2"},pe=["onSubmit"],xe={key:0,class:"text-center text-gray-500 py-4"},fe={key:1,class:"mt-4 flex justify-center space-x-2"},ge=Object.assign({layout:W},{__name:"Index",props:{salidas:Object},setup(N){const c=N,w=A().props.flash,_=b(()=>w.success||w.message),p=m(""),o=m(""),l=m(""),u=m([]);function M(){u.value=c.salidas.data.filter(a=>{const s=new Date(a.fecha),t=o.value?new Date(o.value):null,n=l.value?new Date(l.value):null;return!(t&&s<t||n&&s>n)})}function T(){o.value="",l.value="",u.value=c.salidas.data}G(()=>{u.value=c.salidas.data}),I(()=>c.salidas,a=>{u.value=a.data});const C=b(()=>{let a=u.value;const s=p.value.toLowerCase();return s?a.filter(t=>{var y,L,S,F,k,D;const n=((L=(y=t.user)==null?void 0:y.name)==null?void 0:L.toLowerCase())||"",x=((F=(S=t.tipoalerta)==null?void 0:S.descripcion)==null?void 0:F.toLowerCase())||"",f=((D=(k=t.gestion)==null?void 0:k.nombre)==null?void 0:D.toLowerCase())||"";return t.descripcion.toLowerCase().includes(s)||t.fecha.toLowerCase().includes(s)||t.hora.toLowerCase().includes(s)||n.includes(s)||x.includes(s)||f.includes(s)}):a});function U(a){confirm("¿Estás seguro de eliminar esta salida?")&&Q.delete(route("salida.destroy",a),{preserveScroll:!0,preserveState:!1})}function H(){const a=new URLSearchParams;o.value&&a.append("inicio",o.value),l.value&&a.append("fin",l.value),window.open(route("salida.export.excel")+"?"+a.toString(),"_blank")}const P=b(()=>!p.value&&!o.value&&!l.value);return(a,s)=>(r(),i("div",null,[e("div",X,[s[4]||(s[4]=e("h1",{class:"text-3xl font-bold text-gray-800"},"Salidas",-1)),O(E(V),{href:a.route("salida.create"),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded shadow"},{default:$(()=>s[3]||(s[3]=[z(" + Nueva salida ")])),_:1},8,["href"])]),_.value?(r(),i("div",Y,d(_.value),1)):g("",!0),e("div",Z,[e("div",ee,[h(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),type:"text",placeholder:"Buscar salida...",class:"w-full sm:w-1/3 px-4 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring focus:ring-blue-200"},null,512),[[v,p.value]])]),e("div",te,[e("div",se,[h(e("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=t=>o.value=t),class:"border rounded px-3 py-2"},null,512),[[v,o.value]]),h(e("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=t=>l.value=t),class:"border rounded px-3 py-2"},null,512),[[v,l.value]]),e("button",{onClick:M,class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-3 py-2 rounded shadow"}," Filtrar "),e("button",{onClick:T,class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold px-3 py-2 rounded shadow"}," Limpiar ")]),e("div",{class:"flex gap-2"},[e("button",{onClick:H,class:"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded shadow"}," Exportar Excel ")])]),e("table",ae,[s[6]||(s[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Descripción"),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Fecha"),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Hora"),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Usuario"),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Gestión"),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Tipo de Alerta"),e("th",{class:"px-6 py-3 text-right text-sm font-semibold text-gray-700"},"Acciones")])],-1)),e("tbody",oe,[(r(!0),i(j,null,B(C.value,t=>{var n,x,f;return r(),i("tr",{key:t.id},[e("td",le,d(t.descripcion),1),e("td",re,d(t.fecha),1),e("td",ne,d(t.hora),1),e("td",ie,d(((n=t.user)==null?void 0:n.name)||"—"),1),e("td",de,d(((x=t.gestion)==null?void 0:x.nombre)||"—"),1),e("td",ce,d(((f=t.tipoalerta)==null?void 0:f.descripcion)||"—"),1),e("td",ue,[e("form",{onSubmit:R(y=>U(t.id),["prevent"]),class:"inline"},s[5]||(s[5]=[e("button",{type:"submit",class:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded shadow"}," Eliminar ",-1)]),40,pe)])])}),128))])]),C.value.length===0?(r(),i("div",xe," No se encontraron salidas. ")):g("",!0),P.value?(r(),i("div",fe,[(r(!0),i(j,null,B(c.salidas.links,t=>(r(),q(K(t.url?E(V):"span"),{key:t.label,href:t.url,class:J(["px-3 py-1 rounded border text-sm",{"bg-blue-600 text-white font-semibold":t.active,"bg-white text-gray-700 hover:bg-gray-100":!t.active,"cursor-not-allowed opacity-50":!t.url}]),innerHTML:t.label},null,8,["href","class","innerHTML"]))),128))])):g("",!0)])]))}});export{ge as default};
